(()=>{"use strict";const e="remove",t=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function s(){}function n(e){for(const t in e)delete e[t]}const i=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},a=class extends t{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const s=this.listeners_||(this.listeners_={}),n=s[e]||(s[e]=[]);n.includes(t)||n.push(t)}dispatchEvent(e){const t="string"==typeof e,n=t?e:e.type,a=this.listeners_&&this.listeners_[n];if(!a)return;const r=t?new i(e):e;r.target||(r.target=this.eventTarget_||this);const h=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});let o;n in h||(h[n]=0,l[n]=0),++h[n];for(let e=0,t=a.length;e<t;++e)if(o="handleEvent"in a[e]?a[e].handleEvent(r):a[e].call(this,r),!1===o||r.propagationStopped){o=!1;break}if(0==--h[n]){let e=l[n];for(delete l[n];e--;)this.removeEventListener(n,s);delete h[n]}return o}disposeInternal(){this.listeners_&&n(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const i=n.indexOf(t);-1!==i&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[i]=s,++this.pendingRemovals_[e]):(n.splice(i,1),0===n.length&&delete this.listeners_[e]))}};function r(e,t,s,n,i){if(i){const i=s;s=function(a){return e.removeEventListener(t,s),i.call(n??this,a)}}else n&&n!==e&&(s=s.bind(n));const a={target:e,type:t,listener:s};return e.addEventListener(t,s),a}function h(e,t,s,n){return r(e,t,s,n,!0)}function l(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),n(e))}class o extends a{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const s=e.length,n=new Array(s);for(let i=0;i<s;++i)n[i]=r(this,e[i],t);return n}return r(this,e,t)}onceInternal(e,t){let s;if(Array.isArray(e)){const n=e.length;s=new Array(n);for(let i=0;i<n;++i)s[i]=h(this,e[i],t)}else s=h(this,e,t);return t.ol_key=s,s}unInternal(e,t){const s=t.ol_key;if(s)!function(e){if(Array.isArray(e))for(let t=0,s=e.length;t<s;++t)l(e[t]);else l(e)}(s);else if(Array.isArray(e))for(let s=0,n=e.length;s<n;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}o.prototype.on,o.prototype.once,o.prototype.un;const d=o;let c=0;class p extends i{constructor(e,t,s){super(e),this.key=t,this.oldValue=s}}const u=class extends d{constructor(e){super(),this.on,this.once,this.un,this.ol_uid||(this.ol_uid=String(++c)),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let s;s=`change:${e}`,this.hasListener(s)&&this.dispatchEvent(new p(s,e,t)),s="propertychange",this.hasListener(s)&&this.dispatchEvent(new p(s,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,s){const n=this.values_||(this.values_={});if(s)n[e]=t;else{const s=n[e];n[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const s in e)this.set(s,e[s],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const s=this.values_[e];delete this.values_[e],function(e){let t;for(t in e)return!1;return!t}(this.values_)&&(this.values_=null),t||this.notify(e,s)}}},_="length";class g extends i{constructor(e,t,s){super(e),this.element=t,this.index=s}}const m=class extends u{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let e=0,t=this.array_.length;e<t;++e)this.assertUnique_(this.array_[e],e);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,s=e.length;t<s;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let s=0,n=t.length;s<n;++s)e(t[s],s,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(_)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new g("add",t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let s=0,n=t.length;s<n;++s)if(t[s]===e)return this.removeAt(s)}removeAt(t){if(t<0||t>=this.getLength())return;const s=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new g(e,s,t)),s}setAt(t,s){if(t>=this.getLength())return void this.insertAt(t,s);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(s,t);const n=this.array_[t];this.array_[t]=s,this.dispatchEvent(new g(e,n,t)),this.dispatchEvent(new g("add",s,t))}updateLength_(){this.set(_,this.array_.length)}assertUnique_(e,t){for(let s=0,n=this.array_.length;s<n;++s)if(this.array_[s]===e&&s!==t)throw new Error("Duplicate item added to a unique collection")}},v=class extends u{constructor(e){super();const t=e.element;!t||e.target||t.style.pointerEvents||(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let e=0,t=this.listenerKeys.length;e<t;++e)l(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==s&&this.listenerKeys.push(r(e,"postrender",this.render,this)),e.render()}}render(e){}setTarget(e){this.target_="string"==typeof e?document.getElementById(e):e}},f=(new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),(e,t,s)=>{const n=document.createElement(e);return Object.entries(t||{}).forEach((([e,t])=>n.setAttribute(e,t))),s&&s(n),n}),y=class{constructor({pane:e,element:t}){this.pane_=e,this.element_=t}remove(){this.pane_.removeWidget_(this),this.pane_=void 0}},E=class extends u{constructor({sidePanel:e,paneId:t,paneUniqId:s,name:n,icon:i,weight:a}){super({name:n,icon:i,weight:a}),this.sidePanel_=e,this.paneId_=t,this.paneUniqId_=s,this.element_=f("div",{id:`ol-side-panel-pane-${this.paneUniqId_}`,role:"tabpanel",class:"ol-side-panel-pane",tabindex:"0","aria-labelledby":`ol-side-panel-tab-${this.paneUniqId_}`}),this.headerElement_=f("h1",{class:"ol-side-panel-header"}),this.element_.appendChild(this.headerElement_),this.headerElementText_=document.createElement("span"),this.headerElementText_.innerHTML=this.get("name"),this.headerElement_.appendChild(this.headerElementText_),this.headerElementCloser_=f("span",{class:"ol-side-panel-close"}),this.headerElementCloser_.innerHTML="Â«",this.headerElement_.appendChild(this.headerElementCloser_),this.headerElementCloser_.addEventListener("click",(e=>{e.preventDefault(),this.set("active",!1)})),this.on("change:name",(()=>{this.headerElementText_.innerHTML=this.get("name")})),this.widgets=new m,this.widgets.on("add",(e=>this.element_.appendChild(e.element.element_))),this.widgets.on("remove",(e=>this.element_.removeChild(e.element.element_))),this.on("change:active",(()=>{this.get("active")?-1===this.element_.className.search(/\bactive\b/)&&(this.element_.className+=" active"):this.element_.className=this.element_.className.replace(/\s*\bactive\b/g,"")}))}remove(){this.sidePanel_.removePane_(this),this.sidePanel_=void 0}addWidgetElement(e){const t=new y({pane:this,element:e});return this.widgets.push(t),t}removeWidget_(e){this.widgets.remove(e)}};class w{constructor({pane:e}){this.pane_=e,this.element_=f("button",{id:`ol-side-panel-tab-${this.pane_.paneUniqId_}`,role:"tab","aria-controls":`ol-side-panel-pane-${this.pane_.paneUniqId_}`}),this.updateName_(),this.updateIcon_(),this.updateWeight_(),this.pane_.on("change:name",(()=>this.updateName_())),this.pane_.on("change:icon",(()=>this.updateIcon_())),this.pane_.on("change:weight",(()=>this.updateWeight_())),this.pane_.on("change:active",(()=>{const e=this.pane_.get("active");e?-1===this.element_.className.search(/\bactive\b/)&&(this.element_.className+=" active"):this.element_.className=this.element_.className.replace(/\s*\bactive\b/g,""),this.element_.setAttribute("aria-selected",e?"true":"false")})),this.element_.addEventListener("click",(e=>{e.preventDefault(),this.pane_.set("active",!this.pane_.get("active")),this.element_.blur()}))}static fromPane(e){const t=new w({pane:e});return e.tabRef_=t,t}updateName_(){const e=this.pane_.get("name");this.element_.setAttribute("aria-label",`Tab for map side pane: '${e}'`)}updateIcon_(){this.element_.innerHTML=this.pane_.get("icon")}updateWeight_(){this.element_.style.order=this.pane_.get("weight")}}const b=w;window.olSidePanel=window.olSidePanel||{},window.olSidePanel.SidePanel=class extends v{constructor(){super({element:document.createElement("div"),activePane:null});const{element:e}=this;e.className="ol-side-panel ol-unselectable ol-control",window.nextOlSidePanelPaneUniqId=window.nextOlSidePanelPaneUniqId||0,this.panes=new m,e.appendChild(f("div",{class:"ol-side-panel-tabs",role:"tablist"},(e=>{this.panes.on("add",(t=>{const s=t.element;e.appendChild(b.fromPane(s).element_),s.on("change:active",(()=>{s.get("active")||s!==this.get("activePane")?s.get("active")&&this.updateActivePane_(s):this.updateActivePane_(null)}))})),this.panes.on("remove",(t=>{e.removeChild(t.element.tabRef_.element_)})),e.appendChild(f("div",{class:"ol-side-panel-tabs-separator"}))}))),e.appendChild(f("div",{class:"ol-side-panel-content"},(e=>{this.panes.on("add",(t=>e.appendChild(t.element.element_))),this.panes.on("remove",(t=>{e.removeChild(t.element.element_),t.element===this.get("activePane")&&this.updateActivePane_(null)}))}))),this.on("change:activePane",(()=>{this.get("activePane")?this.getMap().getTargetElement().className=this.getMap().getTargetElement().className.replace(/\bol-side-panel-collapsed\b/g,""):-1===this.getMap().getTargetElement().className.search(/\bol-side-panel-collapsed\b/)&&(this.getMap().getTargetElement().className+=" ol-side-panel-collapsed")}))}definePane({paneId:e,name:t,icon:s,weight:n}){const i=window.nextOlSidePanelPaneUniqId++,a=new E({paneId:e,paneUniqId:i,name:t,icon:s,weight:n});return this.panes.push(a),a}getPaneById(e){return this.panes.getArray().find((t=>t.paneId_===e))}removePaneById(e){this.removePane_(this.getPaneById(e))}removePane_(e){this.panes.remove(e)}addWidgetElement(e,t){return this.getPane(e).addWidgetElement(t)}updateActivePane_(e){this.set("activePane",e),this.panes.getArray().filter((t=>t!==e)).forEach((e=>e.set("active",!1)))}setMap(e){const t=this.getMap();if(e===t)return;const s=e=>{e&&e.className.replace(/\bmap-with-ol-side-panel\b/g,"")},n=e=>{e&&(e.className+=" map-with-ol-side-panel ol-side-panel-collapsed")};if(t&&(s(t.getTargetElement()),this.onMapTargetChange&&(t.un("change:target",this.onMapTargetChange.listener),this.onMapTargetChange=null)),super.setMap(e),e){n(e.getTargetElement());const t=t=>{s(t.oldValue),n(e.getTargetElement())};this.onMapTargetChange=e.getInteractions().on("change:target",t)}}}})();